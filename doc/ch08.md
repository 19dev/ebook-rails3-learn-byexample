# Ch08: Sign in, sign out
# 8.1.1 Sessions controller

~$ rails generate controller Sessions --no-test-framework
~$ rails generate integration_test authentication_pages

Önce testini yaz

~$ vim spec/requests/authentication_pages_spec.rb
describe "Authentication" do
...
end

Test başarısız olacak,

~$ bundle exec rspec spec/
BAŞARISIZ

RESTful'un ne kadarına ihtiyaç var: show ve edit gereksiz. O yüzden

~$ vim config/routes.rb
resources :sessions, only: [:new, :create, :destroy]
match '/signin',  to: 'sessions#new'
match '/signout', to: 'sessions#destroy', via: :delete

yeterli. Fakat bu haliyle url'den /signin ve /signout istemek için yeterli
değil. Gerekli eylemi sağlayacak ayak eksik. Örneğin /signin isteği aşağıda ki
gibi hata mesajıyla karşılanıyor,

    Unknown action
    The action 'new' could not be found for SessionsController

mealen /signin tamam sessions#new'e yönlendiriliyor yani sessions
controller'inin new yöntemine yönlendiriliyor. Fakat aradığınız numaraya
ulaşılamıyor durumu söz konusudur. Bunun için ilgili controller'a girdi yapmak
gerek,

~$ vim app/controllers/sessions_controller.rb
def new
end
def create
end
def destroy
end

controller da tamam fakat view ortalıkta yok. /signin istendiğinde alınan hata
mesajı şöyledir,

    Template is missing
    Missing template sessions/new, application/new with {:locale=>[:en],
    :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: *
    "/home/seyyah/work/rails3/app/views"

template/view eksik. Sırayla oluşturalım view:new,

~$ vim app/views/sessions/new.html.erb
<% provide :title, "Sign in" %>
<h1>Sign in</h1>

Tekrar test edelim,

~$ bundle exec rspec spec/
BAŞARILI

# 8.1.2 Sigin tests


